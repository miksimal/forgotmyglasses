(this.webpackJsonpforgotmyglasses=this.webpackJsonpforgotmyglasses||[]).push([[0],{26:function(e,t){},466:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(55),i=a.n(o),l=(a(62),a(7)),c=a.n(l),s=a(19),u=a(6),p=(a(64),a(468)),d=a(15),m=a.n(d),f=a(56),h=a(29),g=a(27),b=a(30);m.a.config.region="eu-west-1",m.a.config.credentials=new m.a.CognitoIdentityCredentials({IdentityPoolId:"eu-west-1:4a8f8cca-1fe0-4ce5-843c-3118a21061f6"});var y=new m.a.Rekognition;var E=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),l=Object(u.a)(i,2),d=l[0],m=l[1],E=Object(n.useState)(Object(p.a)()),v=Object(u.a)(E,2),w=v[0],k=v[1],D=Object(n.useState)(!0),x=Object(u.a)(D,2),P=x[0],F=x[1],I=Object(n.useState)(!1),O=Object(u.a)(I,2),A=O[0],j=O[1],C=Object(n.useState)(!1),B=Object(u.a)(C,2),S=B[0],T=B[1],N=Object(n.useState)(0),W=Object(u.a)(N,2),L=W[0],M=W[1];function R(){return(R=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={CollectionId:w},e.next=4,y.createCollection(t).promise();case 4:k(w),F(!1),j(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function z(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=a,n.readAsArrayBuffer(e)}))}function J(e){return U.apply(this,arguments)}function U(){return(U=Object(s.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,z(t);case 4:if(null!=(a=e.sent)){e.next=7;break}throw new Error("Error reading file");case 7:return n={CollectionId:w,Image:{Bytes:a}},e.next=10,y.indexFaces(n).promise();case 10:(r=e.sent).FaceRecords&&0===r.FaceRecords.length?window.alert("Woops, no face was registered in that photo. Can you try a different one?"):(T(!0),M(L+1)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0.message);case 17:o(!1),document.getElementById("uploadTrainingPhoto").value="";case 19:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function Y(e){return q.apply(this,arguments)}function q(){return(q=Object(s.a)(c.a.mark((function e(t){var a,n,r,o,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,z(t);case 4:if(null!=(n=e.sent)){e.next=7;break}throw new Error("Error reading file");case 7:return r={CollectionId:w,Image:{Bytes:n},MaxFaces:1},e.next=10,y.searchFacesByImage(r).promise();case 10:if((o=e.sent).FaceMatches){e.next=13;break}return e.abrupt("return");case 13:if(0!=(null===(a=o.FaceMatches)||void 0===a?void 0:a.length)){e.next=18;break}return window.alert("This is definitely not your friend. Abort!"),m(!1),document.getElementById("uploadFriendPhoto").value="",e.abrupt("return");case 18:if(!o.FaceMatches[0]){e.next=37;break}if(i=o.FaceMatches[0].Similarity){e.next=22;break}return e.abrupt("return");case 22:e.t0=!0,e.next=e.t0===i<50?25:e.t0===i<75?27:e.t0===i<90?29:e.t0===i<99.5?31:e.t0===i<=100?33:35;break;case 25:return l="This is probably not your friend (less than 50% similarity)",e.abrupt("break",36);case 27:return l="This could be, but probably is not, your friend (less than 75% similarity) - worth a go?",e.abrupt("break",36);case 29:return l="This is probably your friend (greater than 75% similarity)! Say hello!",e.abrupt("break",36);case 31:return l="This is almost certainly your friend (greater than 90% similarity)! Say hello!",e.abrupt("break",36);case 33:return l="This is DEFINITELY your friend (100% similarity score)!",e.abrupt("break",36);case 35:l="Something went wrong, sorry!";case 36:window.alert(l);case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(1),console.log(e.t1.message);case 42:document.getElementById("uploadFriendPhoto").value="",m(!1);case 44:case"end":return e.stop()}}),e,null,[[1,39]])})))).apply(this,arguments)}function K(e){document.getElementById(e).classList.add("highlight")}function $(e){document.getElementById(e).classList.remove("highlight")}return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h2",null,"Ever forget your glasses and fail to recognise a friend?"),r.a.createElement("h4",null,"Keep calm and use this robot to help you \ud83d\udc40"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"Teach the robot")," by uploading photos of your friends \ud83c\udf70"),r.a.createElement("li",null,r.a.createElement("b",null,"Ask the robot if someone is your friend")," by quickly snapping a photo \ud83d\udcf8"))),r.a.createElement("body",null,P&&r.a.createElement("div",null,r.a.createElement(f.a,{variant:"secondary",size:"lg",block:!0,onClick:function(){return R.apply(this,arguments)}},"Let's do it! \ud83d\udd25")),A&&r.a.createElement("div",null,0===L?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Provide a photo of at least one friend."),r.a.createElement("p",null,"A photo may contain up to 100 faces.")):L>0&&L<2?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"One photo added \ud83c\udf89"),r.a.createElement("p",null,"Add more photos or scroll down to try the friend-checker!")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,L," photos added \ud83c\udf89"),r.a.createElement("p",null,"Add more photos or scroll down to try the friend-checker!")),r.a.createElement("input",{id:"uploadTrainingPhoto",onChange:function(e){J(e.target.files?e.target.files[0]:new Blob)},type:"file",accept:"image/*",capture:"camera"}),a?r.a.createElement(h.a,{animation:"border"}):r.a.createElement("div",{id:"trainingPhotoDropArea",onClick:function(){return document.getElementById("uploadTrainingPhoto").click()},onDragEnter:function(e){e.stopPropagation(),e.preventDefault(),K("trainingPhotoDropArea")},onDragOver:function(e){e.stopPropagation(),e.preventDefault(),K("trainingPhotoDropArea")},onDragLeave:function(e){e.stopPropagation(),e.preventDefault(),$("trainingPhotoDropArea")},onDrop:function(e){e.stopPropagation(),e.preventDefault(),$("trainingPhotoDropArea"),function(e){var t=e.dataTransfer.files;if(t.length>1)window.alert("Sorry, only one image at at time please");else{var a=t[0];a.type.startsWith("image")?J(a):window.alert("File must be an image")}}(e)}},r.a.createElement(g.a,{className:"PlusIcon",color:"#61dafb",icon:b.a,size:"3x"}),r.a.createElement("div",{className:"TextWithinUploadBox"},r.a.createElement("span",null,"Drag & drop"),r.a.createElement("span",null,"or click to upload")))),S&&r.a.createElement("div",{className:"FriendChecker"},r.a.createElement("h2",null,"Friend-checker: Snap a photo of your 'friend' \ud83d\udcf8"),r.a.createElement("p",null,"If more than one person is present in the photo, the largest face will be used for the comparison"),r.a.createElement("input",{id:"uploadFriendPhoto",onChange:function(e){Y(e.target.files?e.target.files[0]:new Blob)},type:"file",accept:"image/*",capture:"camera"}),d?r.a.createElement(h.a,{animation:"border"}):r.a.createElement("div",{id:"friendCheckerDropArea",onClick:function(){return document.getElementById("uploadFriendPhoto").click()},onDragEnter:function(e){e.stopPropagation(),e.preventDefault(),K("friendCheckerDropArea")},onDragOver:function(e){e.stopPropagation(),e.preventDefault(),K("friendCheckerDropArea")},onDragLeave:function(e){e.stopPropagation(),e.preventDefault(),$("friendCheckerDropArea")},onDrop:function(e){e.stopPropagation(),e.preventDefault(),$("friendCheckerDropArea"),function(e){var t=e.dataTransfer.files;if(t.length>1)window.alert("Sorry, only one image at at time please");else{var a=t[0];a.type.startsWith("image")?Y(a):window.alert("File must be an image")}}(e)}},r.a.createElement(g.a,{className:"PlusIcon",color:"#61dafb",icon:b.a,size:"3x"}),r.a.createElement("div",{className:"TextWithinUploadBox"},r.a.createElement("span",null,"Drag & drop"),r.a.createElement("span",null,"or click to upload")))),!P&&r.a.createElement("p",{className:"Disclaimer"},"Note: I do not store your photos. Facial features from the training photos are extracted and stored for a maximum of 24 hours. Your data will be used only by you. Nothing is stored from photos uploaded for friend-checking.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(465);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){e.exports=a(466)},62:function(e,t,a){},64:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.ad58afdf.chunk.js.map